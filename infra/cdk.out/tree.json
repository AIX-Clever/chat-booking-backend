{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.232.1"},"children":{"ChatBooking-dev-Database":{"id":"ChatBooking-dev-Database","path":"ChatBooking-dev-Database","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"TenantsTable":{"id":"TenantsTable","path":"ChatBooking-dev-Database/TenantsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/TenantsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"slug","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"slug-index","keySchema":[{"attributeName":"slug","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"tenantId","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-Tenants"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/TenantsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"ApiKeysTable":{"id":"ApiKeysTable","path":"ChatBooking-dev-Database/ApiKeysTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/ApiKeysTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"apiKeyHash","attributeType":"S"},{"attributeName":"tenantId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"tenantId-index","keySchema":[{"attributeName":"tenantId","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"apiKeyHash","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-ApiKeys"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/ApiKeysTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"ServicesTable":{"id":"ServicesTable","path":"ChatBooking-dev-Database/ServicesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/ServicesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"serviceId","attributeType":"S"},{"attributeName":"category","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"category-index","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"category","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"serviceId","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-Services"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/ServicesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"ProvidersTable":{"id":"ProvidersTable","path":"ChatBooking-dev-Database/ProvidersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/ProvidersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"providerId","attributeType":"S"},{"attributeName":"serviceIds","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"serviceId-index","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"serviceIds","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"providerId","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-Providers"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/ProvidersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"AvailabilityTable":{"id":"AvailabilityTable","path":"ChatBooking-dev-Database/AvailabilityTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/AvailabilityTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId_providerId","attributeType":"S"},{"attributeName":"dayOfWeek","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"tenantId_providerId","keyType":"HASH"},{"attributeName":"dayOfWeek","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-ProviderAvailability"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/AvailabilityTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"BookingsTable":{"id":"BookingsTable","path":"ChatBooking-dev-Database/BookingsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/BookingsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"bookingId","attributeType":"S"},{"attributeName":"tenantId_providerId","attributeType":"S"},{"attributeName":"start","attributeType":"S"},{"attributeName":"clientEmail","attributeType":"S"},{"attributeName":"conversationId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"providerId-start-index","keySchema":[{"attributeName":"tenantId_providerId","keyType":"HASH"},{"attributeName":"start","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"clientEmail-index","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"clientEmail","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"conversationId-index","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"conversationId","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"bookingId","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-Bookings"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/BookingsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"ConversationsTable":{"id":"ConversationsTable","path":"ChatBooking-dev-Database/ConversationsTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/ConversationsTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"conversationId","attributeType":"S"},{"attributeName":"state","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"state-index","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"state","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"conversationId","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-Conversations"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/ConversationsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"CategoriesTable":{"id":"CategoriesTable","path":"ChatBooking-dev-Database/CategoriesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Database/CategoriesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tenantId","attributeType":"S"},{"attributeName":"categoryId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"tenantId","keyType":"HASH"},{"attributeName":"categoryId","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true},"tableName":"ChatBooking-Categories"}}},"ScalingRole":{"id":"ScalingRole","path":"ChatBooking-dev-Database/CategoriesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"TenantsTableName":{"id":"TenantsTableName","path":"ChatBooking-dev-Database/TenantsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"ApiKeysTableName":{"id":"ApiKeysTableName","path":"ChatBooking-dev-Database/ApiKeysTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"ServicesTableName":{"id":"ServicesTableName","path":"ChatBooking-dev-Database/ServicesTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"ProvidersTableName":{"id":"ProvidersTableName","path":"ChatBooking-dev-Database/ProvidersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"AvailabilityTableName":{"id":"AvailabilityTableName","path":"ChatBooking-dev-Database/AvailabilityTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"BookingsTableName":{"id":"BookingsTableName","path":"ChatBooking-dev-Database/BookingsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"ConversationsTableName":{"id":"ConversationsTableName","path":"ChatBooking-dev-Database/ConversationsTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CategoriesTableName":{"id":"CategoriesTableName","path":"ChatBooking-dev-Database/CategoriesTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatBooking-dev-Database/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ChatBooking-dev-Database/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"Exports":{"id":"Exports","path":"ChatBooking-dev-Database/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"TenantsTableB701DC57\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"TenantsTableB701DC57\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"TenantsTableB701DC57\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"ApiKeysTable9F4DC7E7\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ApiKeysTable9F4DC7E7\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"ApiKeysTable9F4DC7E7\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"TenantsTableB701DC57\"}":{"id":"Output{\"Ref\":\"TenantsTableB701DC57\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"TenantsTableB701DC57\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"ApiKeysTable9F4DC7E7\"}":{"id":"Output{\"Ref\":\"ApiKeysTable9F4DC7E7\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"ApiKeysTable9F4DC7E7\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"ServicesTableF56E8DC5\"}":{"id":"Output{\"Ref\":\"ServicesTableF56E8DC5\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"ServicesTableF56E8DC5\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"ProvidersTable1BBEDB6D\"}":{"id":"Output{\"Ref\":\"ProvidersTable1BBEDB6D\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"ProvidersTable1BBEDB6D\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"AvailabilityTable497A1E6E\"}":{"id":"Output{\"Ref\":\"AvailabilityTable497A1E6E\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"AvailabilityTable497A1E6E\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"BookingsTableB2628485\"}":{"id":"Output{\"Ref\":\"BookingsTableB2628485\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"BookingsTableB2628485\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"ConversationsTableCD91EB96\"}":{"id":"Output{\"Ref\":\"ConversationsTableCD91EB96\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"ConversationsTableCD91EB96\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"CategoriesTable9FFF5A67\"}":{"id":"Output{\"Ref\":\"CategoriesTable9FFF5A67\"}","path":"ChatBooking-dev-Database/Exports/Output{\"Ref\":\"CategoriesTable9FFF5A67\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"ServicesTableF56E8DC5\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ServicesTableF56E8DC5\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"ServicesTableF56E8DC5\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"ProvidersTable1BBEDB6D\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ProvidersTable1BBEDB6D\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"ProvidersTable1BBEDB6D\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"CategoriesTable9FFF5A67\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CategoriesTable9FFF5A67\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"CategoriesTable9FFF5A67\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"AvailabilityTable497A1E6E\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AvailabilityTable497A1E6E\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"AvailabilityTable497A1E6E\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"BookingsTableB2628485\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"BookingsTableB2628485\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"BookingsTableB2628485\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"ConversationsTableCD91EB96\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ConversationsTableCD91EB96\",\"Arn\"]}","path":"ChatBooking-dev-Database/Exports/Output{\"Fn::GetAtt\":[\"ConversationsTableCD91EB96\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatBooking-dev-Database/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatBooking-dev-Database/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"ChatBooking-dev-Auth":{"id":"ChatBooking-dev-Auth","path":"ChatBooking-dev-Auth","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"AdminUserPool":{"id":"AdminUserPool","path":"ChatBooking-dev-Auth/AdminUserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.232.1","metadata":[]},"children":{"smsRole":{"id":"smsRole","path":"ChatBooking-dev-Auth/AdminUserPool/smsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportsmsRole":{"id":"ImportsmsRole","path":"ChatBooking-dev-Auth/AdminUserPool/smsRole/ImportsmsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Auth/AdminUserPool/smsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"sts:ExternalId":"ChatBookingdevAuthAdminUserPool5288C104"}},"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"sns-publish","policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}}]}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Auth/AdminUserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":true},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","enabledMfas":["SMS_MFA","SOFTWARE_TOKEN_MFA"],"mfaConfiguration":"OPTIONAL","policies":{"passwordPolicy":{"temporaryPasswordValidityDays":7,"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"name","mutable":true,"required":true},{"name":"tenantId","attributeDataType":"String","stringAttributeConstraints":{"minLength":"3","maxLength":"50"},"mutable":false}],"smsConfiguration":{"externalId":"ChatBookingdevAuthAdminUserPool5288C104","snsCallerArn":{"Fn::GetAtt":["AdminUserPoolsmsRoleCD595696","Arn"]}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"userPoolAddOns":{"advancedSecurityMode":"ENFORCED"},"userPoolName":"ChatBooking-AdminUsers","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}},"AdminWebClient":{"id":"AdminWebClient","path":"ChatBooking-dev-Auth/AdminUserPool/AdminWebClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Auth/AdminUserPool/AdminWebClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["email","openid","profile"],"callbackUrLs":["http://localhost:3000/auth/callback","https://admin.chatbooking.com/auth/callback"],"clientName":"ChatBooking-AdminWeb","explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"logoutUrLs":["http://localhost:3000","https://admin.chatbooking.com"],"preventUserExistenceErrors":"ENABLED","refreshTokenValidity":43200,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"AdminUserPoolD0AF18CF"}}}}}},"AdminDomain":{"id":"AdminDomain","path":"ChatBooking-dev-Auth/AdminUserPool/AdminDomain","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolDomain","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Auth/AdminUserPool/AdminDomain/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolDomain","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolDomain","aws:cdk:cloudformation:props":{"domain":"chatbooking-admin-607250385528","userPoolId":{"Ref":"AdminUserPoolD0AF18CF"}}}}}}}},"AdminGroup":{"id":"AdminGroup","path":"ChatBooking-dev-Auth/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Administrators with full access","groupName":"admin","precedence":1,"userPoolId":{"Ref":"AdminUserPoolD0AF18CF"}}}},"StaffGroup":{"id":"StaffGroup","path":"ChatBooking-dev-Auth/StaffGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Staff with limited access","groupName":"staff","precedence":2,"userPoolId":{"Ref":"AdminUserPoolD0AF18CF"}}}},"UserPoolId":{"id":"UserPoolId","path":"ChatBooking-dev-Auth/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"UserPoolArn":{"id":"UserPoolArn","path":"ChatBooking-dev-Auth/UserPoolArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"ChatBooking-dev-Auth/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"UserPoolDomain":{"id":"UserPoolDomain","path":"ChatBooking-dev-Auth/UserPoolDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"UserPoolLoginUrl":{"id":"UserPoolLoginUrl","path":"ChatBooking-dev-Auth/UserPoolLoginUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatBooking-dev-Auth/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ChatBooking-dev-Auth/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"Exports":{"id":"Exports","path":"ChatBooking-dev-Auth/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"AdminUserPoolD0AF18CF\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AdminUserPoolD0AF18CF\",\"Arn\"]}","path":"ChatBooking-dev-Auth/Exports/Output{\"Fn::GetAtt\":[\"AdminUserPoolD0AF18CF\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Ref\":\"AdminUserPoolD0AF18CF\"}":{"id":"Output{\"Ref\":\"AdminUserPoolD0AF18CF\"}","path":"ChatBooking-dev-Auth/Exports/Output{\"Ref\":\"AdminUserPoolD0AF18CF\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatBooking-dev-Auth/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatBooking-dev-Auth/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"ChatBooking-dev-Lambda":{"id":"ChatBooking-dev-Lambda","path":"ChatBooking-dev-Lambda","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"SharedLayer":{"id":"SharedLayer","path":"ChatBooking-dev-Lambda/SharedLayer","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"AuthResolverFunction":{"id":"AuthResolverFunction","path":"ChatBooking-dev-Lambda/AuthResolverFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/AuthResolverFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/AuthResolverFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AuthResolverFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/AuthResolverFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AuthResolverFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttApiKeysTable9F4DC7E7ArnE84F3BB0"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttApiKeysTable9F4DC7E7ArnE84F3BB0"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AuthResolverFunctionServiceRoleDefaultPolicyA6F0ED5F","roles":[{"Ref":"AuthResolverFunctionServiceRoleE466CDE6"}]}}}}}}},"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/AuthResolverFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/AuthResolverFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/AuthResolverFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AuthResolverFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-607250385528-us-east-1","s3Key":"98e4e50395f53359ce127b4085446d99dde8127a187678fb7be4304d99720cdd.zip"},"description":"AppSync authorizer - validates API keys and returns tenant context","environment":{"variables":{"TENANTS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefTenantsTableB701DC57BE8E768B"},"API_KEYS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefApiKeysTable9F4DC7E79648F444"},"SERVICES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefServicesTableF56E8DC54FC0C84D"},"PROVIDERS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefProvidersTable1BBEDB6D429B9BF2"},"AVAILABILITY_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefAvailabilityTable497A1E6E14D99412"},"BOOKINGS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefBookingsTableB262848587A36CBD"},"CONVERSATIONS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefConversationsTableCD91EB96EE2E4585"},"CATEGORIES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefCategoriesTable9FFF5A678A053E38"},"LOG_LEVEL":"INFO"}},"functionName":"ChatBooking-AuthResolver","handler":"handler.lambda_handler","layers":[{"Fn::ImportValue":"ChatBookingPythonLayerArn"}],"memorySize":256,"role":{"Fn::GetAtt":["AuthResolverFunctionServiceRoleE466CDE6","Arn"]},"runtime":"python3.11","timeout":10}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-Lambda/AuthResolverFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AuthResolverFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-Lambda/AuthResolverFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"ChatBookingApi-appsync":{"id":"ChatBookingApi-appsync","path":"ChatBooking-dev-Lambda/AuthResolverFunction/ChatBookingApi-appsync","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["AuthResolverFunction9D28D29B","Arn"]},"principal":"appsync.amazonaws.com"}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"CatalogFunction":{"id":"CatalogFunction","path":"ChatBooking-dev-Lambda/CatalogFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/CatalogFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/CatalogFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/CatalogFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/CatalogFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/CatalogFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttCategoriesTable9FFF5A67Arn8D0D486E"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"CatalogFunctionServiceRoleDefaultPolicy36005DCA","roles":[{"Ref":"CatalogFunctionServiceRoleAFF180B8"}]}}}}}}},"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/CatalogFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/CatalogFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/CatalogFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/CatalogFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-607250385528-us-east-1","s3Key":"06d8e0b5f674cb26f596a91b6751b6dd0dcfa3cbcc137ed45beb351210cb212c.zip"},"description":"Service and provider catalog management","environment":{"variables":{"TENANTS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefTenantsTableB701DC57BE8E768B"},"API_KEYS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefApiKeysTable9F4DC7E79648F444"},"SERVICES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefServicesTableF56E8DC54FC0C84D"},"PROVIDERS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefProvidersTable1BBEDB6D429B9BF2"},"AVAILABILITY_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefAvailabilityTable497A1E6E14D99412"},"BOOKINGS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefBookingsTableB262848587A36CBD"},"CONVERSATIONS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefConversationsTableCD91EB96EE2E4585"},"CATEGORIES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefCategoriesTable9FFF5A678A053E38"},"LOG_LEVEL":"INFO"}},"functionName":"ChatBooking-Catalog","handler":"handler.lambda_handler","layers":[{"Fn::ImportValue":"ChatBookingPythonLayerArn"}],"memorySize":512,"role":{"Fn::GetAtt":["CatalogFunctionServiceRoleAFF180B8","Arn"]},"runtime":"python3.11","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-Lambda/CatalogFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/CatalogFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-Lambda/CatalogFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"AvailabilityFunction":{"id":"AvailabilityFunction","path":"ChatBooking-dev-Lambda/AvailabilityFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/AvailabilityFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/AvailabilityFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AvailabilityFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/AvailabilityFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AvailabilityFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttAvailabilityTable497A1E6EArn6251D385"}},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttBookingsTableB2628485Arn4FAB36A9"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttBookingsTableB2628485Arn4FAB36A9"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"AvailabilityFunctionServiceRoleDefaultPolicyF7AD321C","roles":[{"Ref":"AvailabilityFunctionServiceRoleAED456A7"}]}}}}}}},"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/AvailabilityFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/AvailabilityFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/AvailabilityFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AvailabilityFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-607250385528-us-east-1","s3Key":"08a3c357e7595d476bc30a8abcaca4be774d7334cf01ab7607be4609302ca00b.zip"},"description":"Calculate available time slots for bookings","environment":{"variables":{"TENANTS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefTenantsTableB701DC57BE8E768B"},"API_KEYS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefApiKeysTable9F4DC7E79648F444"},"SERVICES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefServicesTableF56E8DC54FC0C84D"},"PROVIDERS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefProvidersTable1BBEDB6D429B9BF2"},"AVAILABILITY_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefAvailabilityTable497A1E6E14D99412"},"BOOKINGS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefBookingsTableB262848587A36CBD"},"CONVERSATIONS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefConversationsTableCD91EB96EE2E4585"},"CATEGORIES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefCategoriesTable9FFF5A678A053E38"},"LOG_LEVEL":"INFO","SLOT_INTERVAL_MINUTES":"15"}},"functionName":"ChatBooking-Availability","handler":"handler.lambda_handler","layers":[{"Fn::ImportValue":"ChatBookingPythonLayerArn"}],"memorySize":512,"role":{"Fn::GetAtt":["AvailabilityFunctionServiceRoleAED456A7","Arn"]},"runtime":"python3.11","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-Lambda/AvailabilityFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AvailabilityFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-Lambda/AvailabilityFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"BookingFunction":{"id":"BookingFunction","path":"ChatBooking-dev-Lambda/BookingFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/BookingFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/BookingFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/BookingFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/BookingFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/BookingFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttBookingsTableB2628485Arn4FAB36A9"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttBookingsTableB2628485Arn4FAB36A9"},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttConversationsTableCD91EB96Arn4A2B28C6"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttConversationsTableCD91EB96Arn4A2B28C6"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"BookingFunctionServiceRoleDefaultPolicy8C2B4CBE","roles":[{"Ref":"BookingFunctionServiceRole0235703D"}]}}}}}}},"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/BookingFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/BookingFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/BookingFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/BookingFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-607250385528-us-east-1","s3Key":"0103a436f788201fb5505201ff75da5d317b97a604272701ea8edd6dcc3ee617.zip"},"description":"Booking creation, confirmation, and cancellation","environment":{"variables":{"TENANTS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefTenantsTableB701DC57BE8E768B"},"API_KEYS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefApiKeysTable9F4DC7E79648F444"},"SERVICES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefServicesTableF56E8DC54FC0C84D"},"PROVIDERS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefProvidersTable1BBEDB6D429B9BF2"},"AVAILABILITY_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefAvailabilityTable497A1E6E14D99412"},"BOOKINGS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefBookingsTableB262848587A36CBD"},"CONVERSATIONS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefConversationsTableCD91EB96EE2E4585"},"CATEGORIES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefCategoriesTable9FFF5A678A053E38"},"LOG_LEVEL":"INFO"}},"functionName":"ChatBooking-Booking","handler":"handler.lambda_handler","layers":[{"Fn::ImportValue":"ChatBookingPythonLayerArn"}],"memorySize":512,"role":{"Fn::GetAtt":["BookingFunctionServiceRole0235703D","Arn"]},"runtime":"python3.11","timeout":60}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-Lambda/BookingFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/BookingFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-Lambda/BookingFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"ChatAgentFunction":{"id":"ChatAgentFunction","path":"ChatBooking-dev-Lambda/ChatAgentFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/ChatAgentFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/ChatAgentFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/ChatAgentFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/ChatAgentFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/ChatAgentFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttBookingsTableB2628485Arn4FAB36A9"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttConversationsTableCD91EB96Arn4A2B28C6"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttBookingsTableB2628485Arn4FAB36A9"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttConversationsTableCD91EB96Arn4A2B28C6"},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttAvailabilityTable497A1E6EArn6251D385"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttProvidersTable1BBEDB6DArn8763273B"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttServicesTableF56E8DC5ArnE543C7F6"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"ChatAgentFunctionServiceRoleDefaultPolicy6BB568D2","roles":[{"Ref":"ChatAgentFunctionServiceRole385D1C13"}]}}}}}}},"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/ChatAgentFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/ChatAgentFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/ChatAgentFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/ChatAgentFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-607250385528-us-east-1","s3Key":"71237b1cc3f3aeded811755a408ba4545db4c68f8da4d95428c542d7f8cba76b.zip"},"description":"Conversational FSM agent for booking flow","environment":{"variables":{"TENANTS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefTenantsTableB701DC57BE8E768B"},"API_KEYS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefApiKeysTable9F4DC7E79648F444"},"SERVICES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefServicesTableF56E8DC54FC0C84D"},"PROVIDERS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefProvidersTable1BBEDB6D429B9BF2"},"AVAILABILITY_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefAvailabilityTable497A1E6E14D99412"},"BOOKINGS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefBookingsTableB262848587A36CBD"},"CONVERSATIONS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefConversationsTableCD91EB96EE2E4585"},"CATEGORIES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefCategoriesTable9FFF5A678A053E38"},"LOG_LEVEL":"INFO"}},"functionName":"ChatBooking-ChatAgent","handler":"handler.lambda_handler","layers":[{"Fn::ImportValue":"ChatBookingPythonLayerArn"}],"memorySize":1024,"role":{"Fn::GetAtt":["ChatAgentFunctionServiceRole385D1C13","Arn"]},"runtime":"python3.11","timeout":60}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-Lambda/ChatAgentFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/ChatAgentFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-Lambda/ChatAgentFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"RegisterTenantFunction":{"id":"RegisterTenantFunction","path":"ChatBooking-dev-Lambda/RegisterTenantFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttApiKeysTable9F4DC7E7ArnE84F3BB0"},{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttApiKeysTable9F4DC7E7ArnE84F3BB0"},"/index/*"]]},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},"/index/*"]]}]},{"Action":["cognito-idp:AdminCreateUser","cognito-idp:AdminSetUserPassword"],"Effect":"Allow","Resource":{"Fn::ImportValue":"ChatBooking-dev-Auth:ExportsOutputFnGetAttAdminUserPoolD0AF18CFArnBE306E57"}}],"Version":"2012-10-17"},"policyName":"RegisterTenantFunctionServiceRoleDefaultPolicy86737BB7","roles":[{"Ref":"RegisterTenantFunctionServiceRoleDE02E8D9"}]}}}}}}},"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-607250385528-us-east-1","s3Key":"a908de25eb75b720f1f9292f5b959d974f791e0f7aee839989f2a3f6255da03e.zip"},"description":"Public tenant registration endpoint","environment":{"variables":{"TENANTS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefTenantsTableB701DC57BE8E768B"},"API_KEYS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefApiKeysTable9F4DC7E79648F444"},"SERVICES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefServicesTableF56E8DC54FC0C84D"},"PROVIDERS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefProvidersTable1BBEDB6D429B9BF2"},"AVAILABILITY_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefAvailabilityTable497A1E6E14D99412"},"BOOKINGS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefBookingsTableB262848587A36CBD"},"CONVERSATIONS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefConversationsTableCD91EB96EE2E4585"},"CATEGORIES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefCategoriesTable9FFF5A678A053E38"},"LOG_LEVEL":"INFO","USER_POOL_ID":{"Fn::ImportValue":"ChatBooking-dev-Auth:ExportsOutputRefAdminUserPoolD0AF18CF79276EF5"}}},"functionName":"ChatBooking-RegisterTenant","handler":"handler.lambda_handler","layers":[{"Fn::ImportValue":"ChatBookingPythonLayerArn"}],"memorySize":512,"role":{"Fn::GetAtt":["RegisterTenantFunctionServiceRoleDE02E8D9","Arn"]},"runtime":"python3.11","timeout":15}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-Lambda/RegisterTenantFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"UpdateTenantFunction":{"id":"UpdateTenantFunction","path":"ChatBooking-dev-Lambda/UpdateTenantFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.232.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputFnGetAttTenantsTableB701DC57ArnFFAEC087"},"/index/*"]]}]},{"Action":"cognito-idp:AdminGetUser","Effect":"Allow","Resource":{"Fn::ImportValue":"ChatBooking-dev-Auth:ExportsOutputFnGetAttAdminUserPoolD0AF18CFArnBE306E57"}}],"Version":"2012-10-17"},"policyName":"UpdateTenantFunctionServiceRoleDefaultPolicy299FDD14","roles":[{"Ref":"UpdateTenantFunctionServiceRole61716895"}]}}}}}}},"Code":{"id":"Code","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-607250385528-us-east-1","s3Key":"44da60d5a0ef4ba81442c60754c6fe39e8dd3bc0133b7350443b4aa863cf5342.zip"},"description":"Tenant settings update","environment":{"variables":{"TENANTS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefTenantsTableB701DC57BE8E768B"},"API_KEYS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefApiKeysTable9F4DC7E79648F444"},"SERVICES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefServicesTableF56E8DC54FC0C84D"},"PROVIDERS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefProvidersTable1BBEDB6D429B9BF2"},"AVAILABILITY_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefAvailabilityTable497A1E6E14D99412"},"BOOKINGS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefBookingsTableB262848587A36CBD"},"CONVERSATIONS_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefConversationsTableCD91EB96EE2E4585"},"CATEGORIES_TABLE":{"Fn::ImportValue":"ChatBooking-dev-Database:ExportsOutputRefCategoriesTable9FFF5A678A053E38"},"LOG_LEVEL":"INFO","USER_POOL_ID":{"Fn::ImportValue":"ChatBooking-dev-Auth:ExportsOutputRefAdminUserPoolD0AF18CF79276EF5"}}},"functionName":"ChatBooking-UpdateTenant","handler":"handler.lambda_handler","layers":[{"Fn::ImportValue":"ChatBookingPythonLayerArn"}],"memorySize":512,"role":{"Fn::GetAtt":["UpdateTenantFunctionServiceRole61716895","Arn"]},"runtime":"python3.11","timeout":30}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-Lambda/UpdateTenantFunction/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}}}},"AuthResolverErrorAlarm":{"id":"AuthResolverErrorAlarm","path":"ChatBooking-dev-Lambda/AuthResolverErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AuthResolverErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"AuthResolver Lambda errors exceed threshold","alarmName":"ChatBooking-AuthResolver-Errors","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AuthResolverFunction9D28D29B"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"AuthResolverThrottleAlarm":{"id":"AuthResolverThrottleAlarm","path":"ChatBooking-dev-Lambda/AuthResolverThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AuthResolverThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"AuthResolver Lambda throttles exceed threshold","alarmName":"ChatBooking-AuthResolver-Throttles","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AuthResolverFunction9D28D29B"}}],"evaluationPeriods":1,"metricName":"Throttles","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"AuthResolverDurationAlarm":{"id":"AuthResolverDurationAlarm","path":"ChatBooking-dev-Lambda/AuthResolverDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/AuthResolverDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"AuthResolver Lambda duration high (P99)","alarmName":"ChatBooking-AuthResolver-Duration","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"AuthResolverFunction9D28D29B"}}],"evaluationPeriods":2,"extendedStatistic":"p99","metricName":"Duration","namespace":"AWS/Lambda","period":300,"threshold":8000,"treatMissingData":"notBreaching"}}}}},"BookingErrorAlarm":{"id":"BookingErrorAlarm","path":"ChatBooking-dev-Lambda/BookingErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/BookingErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Booking Lambda errors exceed threshold","alarmName":"ChatBooking-Booking-Errors","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"BookingFunctionBDD6B8BC"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"BookingThrottleAlarm":{"id":"BookingThrottleAlarm","path":"ChatBooking-dev-Lambda/BookingThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/BookingThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Booking Lambda throttles exceed threshold","alarmName":"ChatBooking-Booking-Throttles","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"BookingFunctionBDD6B8BC"}}],"evaluationPeriods":1,"metricName":"Throttles","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"BookingDurationAlarm":{"id":"BookingDurationAlarm","path":"ChatBooking-dev-Lambda/BookingDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/BookingDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"Booking Lambda duration high (P99)","alarmName":"ChatBooking-Booking-Duration","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"BookingFunctionBDD6B8BC"}}],"evaluationPeriods":2,"extendedStatistic":"p99","metricName":"Duration","namespace":"AWS/Lambda","period":300,"threshold":48000,"treatMissingData":"notBreaching"}}}}},"ChatAgentErrorAlarm":{"id":"ChatAgentErrorAlarm","path":"ChatBooking-dev-Lambda/ChatAgentErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/ChatAgentErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"ChatAgent Lambda errors exceed threshold","alarmName":"ChatBooking-ChatAgent-Errors","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"ChatAgentFunction2B92A177"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"ChatAgentThrottleAlarm":{"id":"ChatAgentThrottleAlarm","path":"ChatBooking-dev-Lambda/ChatAgentThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/ChatAgentThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"ChatAgent Lambda throttles exceed threshold","alarmName":"ChatBooking-ChatAgent-Throttles","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"ChatAgentFunction2B92A177"}}],"evaluationPeriods":1,"metricName":"Throttles","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"ChatAgentDurationAlarm":{"id":"ChatAgentDurationAlarm","path":"ChatBooking-dev-Lambda/ChatAgentDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/ChatAgentDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"ChatAgent Lambda duration high (P99)","alarmName":"ChatBooking-ChatAgent-Duration","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"ChatAgentFunction2B92A177"}}],"evaluationPeriods":2,"extendedStatistic":"p99","metricName":"Duration","namespace":"AWS/Lambda","period":300,"threshold":48000,"treatMissingData":"notBreaching"}}}}},"RegisterTenantErrorAlarm":{"id":"RegisterTenantErrorAlarm","path":"ChatBooking-dev-Lambda/RegisterTenantErrorAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/RegisterTenantErrorAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"RegisterTenant Lambda errors exceed threshold","alarmName":"ChatBooking-RegisterTenant-Errors","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"RegisterTenantFunctionBE8E1377"}}],"evaluationPeriods":1,"metricName":"Errors","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":10,"treatMissingData":"notBreaching"}}}}},"RegisterTenantThrottleAlarm":{"id":"RegisterTenantThrottleAlarm","path":"ChatBooking-dev-Lambda/RegisterTenantThrottleAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/RegisterTenantThrottleAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"RegisterTenant Lambda throttles exceed threshold","alarmName":"ChatBooking-RegisterTenant-Throttles","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"RegisterTenantFunctionBE8E1377"}}],"evaluationPeriods":1,"metricName":"Throttles","namespace":"AWS/Lambda","period":300,"statistic":"Sum","threshold":5,"treatMissingData":"notBreaching"}}}}},"RegisterTenantDurationAlarm":{"id":"RegisterTenantDurationAlarm","path":"ChatBooking-dev-Lambda/RegisterTenantDurationAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-Lambda/RegisterTenantDurationAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"alarmDescription":"RegisterTenant Lambda duration high (P99)","alarmName":"ChatBooking-RegisterTenant-Duration","comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"FunctionName","value":{"Ref":"RegisterTenantFunctionBE8E1377"}}],"evaluationPeriods":2,"extendedStatistic":"p99","metricName":"Duration","namespace":"AWS/Lambda","period":300,"threshold":12000,"treatMissingData":"notBreaching"}}}}},"AuthResolverFunctionArn":{"id":"AuthResolverFunctionArn","path":"ChatBooking-dev-Lambda/AuthResolverFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CatalogFunctionArn":{"id":"CatalogFunctionArn","path":"ChatBooking-dev-Lambda/CatalogFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"AvailabilityFunctionArn":{"id":"AvailabilityFunctionArn","path":"ChatBooking-dev-Lambda/AvailabilityFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"BookingFunctionArn":{"id":"BookingFunctionArn","path":"ChatBooking-dev-Lambda/BookingFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"ChatAgentFunctionArn":{"id":"ChatAgentFunctionArn","path":"ChatBooking-dev-Lambda/ChatAgentFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatBooking-dev-Lambda/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ChatBooking-dev-Lambda/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"Exports":{"id":"Exports","path":"ChatBooking-dev-Lambda/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"AuthResolverFunction9D28D29B\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AuthResolverFunction9D28D29B\",\"Arn\"]}","path":"ChatBooking-dev-Lambda/Exports/Output{\"Fn::GetAtt\":[\"AuthResolverFunction9D28D29B\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"CatalogFunctionCE342920\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"CatalogFunctionCE342920\",\"Arn\"]}","path":"ChatBooking-dev-Lambda/Exports/Output{\"Fn::GetAtt\":[\"CatalogFunctionCE342920\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"AvailabilityFunction6B970752\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"AvailabilityFunction6B970752\",\"Arn\"]}","path":"ChatBooking-dev-Lambda/Exports/Output{\"Fn::GetAtt\":[\"AvailabilityFunction6B970752\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"BookingFunctionBDD6B8BC\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"BookingFunctionBDD6B8BC\",\"Arn\"]}","path":"ChatBooking-dev-Lambda/Exports/Output{\"Fn::GetAtt\":[\"BookingFunctionBDD6B8BC\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"ChatAgentFunction2B92A177\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ChatAgentFunction2B92A177\",\"Arn\"]}","path":"ChatBooking-dev-Lambda/Exports/Output{\"Fn::GetAtt\":[\"ChatAgentFunction2B92A177\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"RegisterTenantFunctionBE8E1377\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"RegisterTenantFunctionBE8E1377\",\"Arn\"]}","path":"ChatBooking-dev-Lambda/Exports/Output{\"Fn::GetAtt\":[\"RegisterTenantFunctionBE8E1377\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"Output{\"Fn::GetAtt\":[\"UpdateTenantFunction76E0A2E1\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UpdateTenantFunction76E0A2E1\",\"Arn\"]}","path":"ChatBooking-dev-Lambda/Exports/Output{\"Fn::GetAtt\":[\"UpdateTenantFunction76E0A2E1\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatBooking-dev-Lambda/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatBooking-dev-Lambda/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"ChatBooking-dev-AppSyncApi":{"id":"ChatBooking-dev-AppSyncApi","path":"ChatBooking-dev-AppSyncApi","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.232.1"},"children":{"ChatBookingApi":{"id":"ChatBookingApi","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.232.1","metadata":[]},"children":{"ApiLogsRole":{"id":"ApiLogsRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportApiLogsRole":{"id":"ImportApiLogsRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ApiLogsRole/ImportApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ApiLogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"]]}]}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"additionalAuthenticationProviders":[{"authenticationType":"AMAZON_COGNITO_USER_POOLS","userPoolConfig":{"userPoolId":{"Fn::ImportValue":"ChatBooking-dev-Auth:ExportsOutputRefAdminUserPoolD0AF18CF79276EF5"},"awsRegion":"us-east-1","defaultAction":"ALLOW"}},{"authenticationType":"API_KEY"}],"authenticationType":"AWS_LAMBDA","lambdaAuthorizerConfig":{"authorizerResultTtlInSeconds":300,"authorizerUri":{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttAuthResolverFunction9D28D29BArn5A0DACA2"}},"logConfig":{"cloudWatchLogsRoleArn":{"Fn::GetAtt":["ChatBookingApiApiLogsRole9BE29727","Arn"]},"excludeVerboseContent":false,"fieldLogLevel":"ERROR"},"name":"ChatBookingGraphQLApi","xrayEnabled":true}}},"Schema":{"id":"Schema","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"definition":"\n# Scalars\nscalar AWSDateTime\nscalar AWSJSON\n\n# Enums\nenum BookingStatus {\n  PENDING\n  CONFIRMED\n  CANCELLED\n  NO_SHOW\n}\n\nenum PaymentStatus {\n  NONE\n  PENDING\n  PAID\n  FAILED\n}\n\nenum ConversationState {\n  INIT\n  SERVICE_PENDING\n  SERVICE_SELECTED\n  PROVIDER_PENDING\n  PROVIDER_SELECTED\n  SLOT_PENDING\n  CONFIRM_PENDING\n  BOOKING_CONFIRMED\n}\n\n\n# Types - Tenant\nenum TenantStatus {\n  ACTIVE\n  SUSPENDED\n  CANCELLED\n}\n\nenum TenantPlan {\n  FREE\n  PRO\n  BUSINESS\n  ENTERPRISE\n}\n\ntype Tenant @aws_api_key @aws_cognito_user_pools {\n  tenantId: ID!\n  name: String!\n  slug: String!\n  status: TenantStatus!\n  plan: TenantPlan!\n  ownerUserId: String!\n  billingEmail: String!\n  settings: AWSJSON\n  createdAt: AWSDateTime!\n  updatedAt: AWSDateTime!\n}\n\ntype ApiKey {\n  apiKey: String!\n  tenantId: ID!\n  status: String!\n  createdAt: AWSDateTime!\n  expiresAt: AWSDateTime!\n}\n\n# Types - Catalog\ntype Category @aws_api_key @aws_cognito_user_pools {\n  categoryId: ID!\n  tenantId: ID!\n  name: String!\n  description: String\n  isActive: Boolean!\n  displayOrder: Int\n  metadata: AWSJSON\n  createdAt: AWSDateTime!\n  updatedAt: AWSDateTime!\n}\n\ntype Service @aws_api_key @aws_cognito_user_pools {\n  serviceId: ID!\n  name: String!\n  description: String\n  category: String!\n  durationMinutes: Int!\n  price: Float\n  available: Boolean!\n}\n\ntype Provider @aws_api_key @aws_cognito_user_pools {\n  providerId: ID!\n  name: String!\n  bio: String\n  serviceIds: [ID!]!\n  timezone: String!\n  metadata: AWSJSON\n  available: Boolean!\n}\n\n# Types - Availability\ntype TimeSlot @aws_api_key @aws_cognito_user_pools {\n  providerId: ID!\n  serviceId: ID!\n  start: AWSDateTime!\n  end: AWSDateTime!\n  isAvailable: Boolean!\n}\n\ntype TimeRange @aws_api_key @aws_cognito_user_pools {\n  startTime: String!\n  endTime: String!\n}\n\ntype ProviderAvailability @aws_cognito_user_pools {\n  providerId: ID!\n  dayOfWeek: String!\n  timeRanges: [TimeRange!]!\n  breaks: [TimeRange!]\n}\n\n# Types - Bookings\ntype Booking @aws_api_key @aws_cognito_user_pools {\n  bookingId: ID!\n  tenantId: ID!\n  serviceId: ID!\n  providerId: ID!\n  start: AWSDateTime!\n  end: AWSDateTime!\n  status: BookingStatus!\n  clientName: String!\n  clientEmail: String!\n  clientPhone: String\n  notes: String\n  conversationId: ID\n  paymentStatus: PaymentStatus!\n  totalAmount: Float!\n  createdAt: AWSDateTime!\n  updatedAt: AWSDateTime!\n}\n\n# Types - Chat\ntype Message @aws_api_key {\n  role: String!\n  content: String!\n  type: String!\n  timestamp: String!\n}\n\ntype Conversation @aws_api_key {\n  conversationId: ID!\n  tenantId: ID!\n  state: ConversationState!\n  context: AWSJSON\n  messages: [Message!]!\n  channel: String!\n  metadata: AWSJSON\n  createdAt: AWSDateTime!\n  updatedAt: AWSDateTime!\n}\n\ntype ChatResponse @aws_api_key {\n  conversation: Conversation!\n  response: AWSJSON!\n}\n\n\n# Inputs - Tenant\ninput RegisterTenantInput {\n  companyName: String!\n  email: String!\n  password: String!\n}\n\ninput UpdateTenantInput {\n  name: String\n  billingEmail: String\n  settings: AWSJSON\n}\n\n# Inputs - Catalog\ninput CreateCategoryInput {\n  name: String!\n  description: String\n  isActive: Boolean\n  displayOrder: Int\n  metadata: AWSJSON\n}\n\ninput UpdateCategoryInput {\n  categoryId: ID!\n  name: String\n  description: String\n  isActive: Boolean\n  displayOrder: Int\n  metadata: AWSJSON\n}\n\ninput CreateServiceInput {\n  name: String!\n  description: String\n  category: String!\n  durationMinutes: Int!\n  price: Float\n}\n\ninput UpdateServiceInput {\n  serviceId: ID!\n  name: String\n  description: String\n  category: String\n  durationMinutes: Int\n  price: Float\n  available: Boolean\n}\n\ninput CreateProviderInput {\n  name: String!\n  bio: String\n  serviceIds: [ID!]!\n  timezone: String!\n  metadata: AWSJSON\n}\n\ninput UpdateProviderInput {\n  providerId: ID!\n  name: String\n  bio: String\n  serviceIds: [ID!]\n  timezone: String\n  metadata: AWSJSON\n  available: Boolean\n}\n\n# Inputs - Availability\ninput GetAvailableSlotsInput {\n  serviceId: ID!\n  providerId: ID!\n  from: AWSDateTime!\n  to: AWSDateTime!\n}\n\ninput TimeRangeInput {\n  startTime: String!\n  endTime: String!\n}\n\ninput SetAvailabilityInput {\n  providerId: ID!\n  dayOfWeek: String!\n  timeRanges: [TimeRangeInput!]!\n  breaks: [TimeRangeInput!]\n}\n\n# Inputs - Bookings\ninput CreateBookingInput {\n  serviceId: ID!\n  providerId: ID!\n  start: AWSDateTime!\n  end: AWSDateTime!\n  clientName: String!\n  clientEmail: String!\n  clientPhone: String\n  notes: String\n  conversationId: ID\n}\n\ninput ConfirmBookingInput {\n  bookingId: ID!\n}\n\ninput CancelBookingInput {\n  bookingId: ID!\n  reason: String\n}\n\ninput GetBookingInput {\n  bookingId: ID!\n}\n\ninput ListBookingsByProviderInput {\n  providerId: ID!\n  startDate: AWSDateTime!\n  endDate: AWSDateTime!\n}\n\ninput ListBookingsByClientInput {\n  clientEmail: String!\n}\n\ninput GetBookingByConversationInput {\n  conversationId: ID!\n}\n\n# Inputs - Chat\ninput StartConversationInput {\n  channel: String\n  metadata: AWSJSON\n}\n\ninput SendMessageInput {\n  conversationId: ID!\n  message: String!\n  messageType: String\n  userData: AWSJSON\n}\n\ninput ConfirmBookingFromConversationInput {\n  conversationId: ID!\n}\n\ninput GetConversationInput {\n  conversationId: ID!\n}\n\n# Queries\ntype Query {\n  # Catalog\n  listCategories(activeOnly: Boolean): [Category!]! @aws_api_key @aws_cognito_user_pools\n  searchServices(text: String, availableOnly: Boolean): [Service!]! @aws_api_key @aws_cognito_user_pools\n  getService(serviceId: ID!): Service @aws_api_key @aws_cognito_user_pools\n  listProviders: [Provider!]! @aws_api_key @aws_cognito_user_pools\n  listProvidersByService(serviceId: ID!): [Provider!]! @aws_api_key @aws_cognito_user_pools\n  \n  # Availability\n  getAvailableSlots(input: GetAvailableSlotsInput!): [TimeSlot!]! @aws_api_key @aws_cognito_user_pools\n  getProviderAvailability(providerId: ID!): [ProviderAvailability!]! @aws_cognito_user_pools\n  \n  # Bookings\n  getBooking(input: GetBookingInput!): Booking @aws_api_key @aws_cognito_user_pools\n  listBookingsByProvider(input: ListBookingsByProviderInput!): [Booking!]! @aws_cognito_user_pools\n  listBookingsByClient(input: ListBookingsByClientInput!): [Booking!]! @aws_cognito_user_pools\n  getBookingByConversation(input: GetBookingByConversationInput!): Booking @aws_api_key @aws_cognito_user_pools\n  \n  # Chat\n  getConversation(input: GetConversationInput!): Conversation @aws_api_key @aws_cognito_user_pools\n}\n\n# Mutations\ntype Mutation {\n  # Tenant (Public/Auth)\n  # Tenant (Public/Auth)\n  registerTenant(input: RegisterTenantInput!): Tenant! @aws_api_key\n  updateTenant(input: UpdateTenantInput!): Tenant! @aws_cognito_user_pools\n\n  # Catalog (Admin)\n  createCategory(input: CreateCategoryInput!): Category! @aws_cognito_user_pools\n  updateCategory(input: UpdateCategoryInput!): Category! @aws_cognito_user_pools\n  deleteCategory(categoryId: ID!): Category! @aws_cognito_user_pools\n\n  createService(input: CreateServiceInput!): Service! @aws_cognito_user_pools\n  updateService(input: UpdateServiceInput!): Service! @aws_cognito_user_pools\n  deleteService(serviceId: ID!): Service! @aws_cognito_user_pools\n  \n  createProvider(input: CreateProviderInput!): Provider! @aws_cognito_user_pools\n  updateProvider(input: UpdateProviderInput!): Provider! @aws_cognito_user_pools\n  deleteProvider(providerId: ID!): Provider! @aws_cognito_user_pools\n  \n  # Availability (Admin)\n  setProviderAvailability(input: SetAvailabilityInput!): ProviderAvailability! @aws_cognito_user_pools\n  \n  # Bookings\n  createBooking(input: CreateBookingInput!): Booking! @aws_api_key @aws_cognito_user_pools\n  confirmBooking(input: ConfirmBookingInput!): Booking! @aws_cognito_user_pools\n  cancelBooking(input: CancelBookingInput!): Booking! @aws_cognito_user_pools\n  \n  # Chat\n  startConversation(input: StartConversationInput!): ChatResponse! @aws_api_key\n  sendMessage(input: SendMessageInput!): ChatResponse! @aws_api_key\n  confirmBookingFromConversation(input: ConfirmBookingFromConversationInput!): ChatResponse! @aws_api_key\n}\n\nschema {\n  query: Query\n  mutation: Mutation\n}\n"}}},"DefaultApiKey":{"id":"DefaultApiKey","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/DefaultApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnApiKey","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::ApiKey","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"description":"API Key for internal/testing","expires":1797289908}}},"LogRetention":{"id":"LogRetention","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"LogGroup":{"id":"LogGroup","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"CatalogDataSource":{"id":"CatalogDataSource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CatalogDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CatalogDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CatalogDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CatalogDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CatalogDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CatalogDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttCatalogFunctionCE342920Arn76EDCCB9"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttCatalogFunctionCE342920Arn76EDCCB9"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"ChatBookingApiCatalogDataSourceServiceRoleDefaultPolicyABFCA79A","roles":[{"Ref":"ChatBookingApiCatalogDataSourceServiceRoleEACED706"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CatalogDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttCatalogFunctionCE342920Arn76EDCCB9"}},"name":"CatalogDataSource","serviceRoleArn":{"Fn::GetAtt":["ChatBookingApiCatalogDataSourceServiceRoleEACED706","Arn"]},"type":"AWS_LAMBDA"}}}}},"AvailabilityDataSource":{"id":"AvailabilityDataSource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/AvailabilityDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/AvailabilityDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/AvailabilityDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/AvailabilityDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/AvailabilityDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/AvailabilityDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttAvailabilityFunction6B970752ArnA8773C46"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttAvailabilityFunction6B970752ArnA8773C46"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"ChatBookingApiAvailabilityDataSourceServiceRoleDefaultPolicy80515F07","roles":[{"Ref":"ChatBookingApiAvailabilityDataSourceServiceRole138161D5"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/AvailabilityDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttAvailabilityFunction6B970752ArnA8773C46"}},"name":"AvailabilityDataSource","serviceRoleArn":{"Fn::GetAtt":["ChatBookingApiAvailabilityDataSourceServiceRole138161D5","Arn"]},"type":"AWS_LAMBDA"}}}}},"BookingDataSource":{"id":"BookingDataSource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/BookingDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/BookingDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/BookingDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/BookingDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/BookingDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/BookingDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttBookingFunctionBDD6B8BCArn85D621FD"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttBookingFunctionBDD6B8BCArn85D621FD"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"ChatBookingApiBookingDataSourceServiceRoleDefaultPolicyB171CE8E","roles":[{"Ref":"ChatBookingApiBookingDataSourceServiceRoleD3BD9C80"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/BookingDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttBookingFunctionBDD6B8BCArn85D621FD"}},"name":"BookingDataSource","serviceRoleArn":{"Fn::GetAtt":["ChatBookingApiBookingDataSourceServiceRoleD3BD9C80","Arn"]},"type":"AWS_LAMBDA"}}}}},"ChatAgentDataSource":{"id":"ChatAgentDataSource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ChatAgentDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ChatAgentDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ChatAgentDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ChatAgentDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ChatAgentDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ChatAgentDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttChatAgentFunction2B92A177Arn6BACA9D2"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttChatAgentFunction2B92A177Arn6BACA9D2"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"ChatBookingApiChatAgentDataSourceServiceRoleDefaultPolicy7EA2C595","roles":[{"Ref":"ChatBookingApiChatAgentDataSourceServiceRoleCAACE196"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ChatAgentDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttChatAgentFunction2B92A177Arn6BACA9D2"}},"name":"ChatAgentDataSource","serviceRoleArn":{"Fn::GetAtt":["ChatBookingApiChatAgentDataSourceServiceRoleCAACE196","Arn"]},"type":"AWS_LAMBDA"}}}}},"RegisterTenantDataSource":{"id":"RegisterTenantDataSource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttRegisterTenantFunctionBE8E1377Arn1F9CA647"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttRegisterTenantFunctionBE8E1377Arn1F9CA647"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"ChatBookingApiRegisterTenantDataSourceServiceRoleDefaultPolicy6324DBF6","roles":[{"Ref":"ChatBookingApiRegisterTenantDataSourceServiceRole52CAFFCA"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttRegisterTenantFunctionBE8E1377Arn1F9CA647"}},"name":"RegisterTenantDataSource","serviceRoleArn":{"Fn::GetAtt":["ChatBookingApiRegisterTenantDataSourceServiceRole52CAFFCA","Arn"]},"type":"AWS_LAMBDA"}}}}},"UpdateTenantDataSource":{"id":"UpdateTenantDataSource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.LambdaDataSource","version":"2.232.1"},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttUpdateTenantFunction76E0A2E1Arn298E3814"},{"Fn::Join":["",[{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttUpdateTenantFunction76E0A2E1Arn298E3814"},":*"]]}]}],"Version":"2012-10-17"},"policyName":"ChatBookingApiUpdateTenantDataSourceServiceRoleDefaultPolicy8172B00E","roles":[{"Ref":"ChatBookingApiUpdateTenantDataSourceServiceRole25BAE893"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"lambdaConfig":{"lambdaFunctionArn":{"Fn::ImportValue":"ChatBooking-dev-Lambda:ExportsOutputFnGetAttUpdateTenantFunction76E0A2E1Arn298E3814"}},"name":"UpdateTenantDataSource","serviceRoleArn":{"Fn::GetAtt":["ChatBookingApiUpdateTenantDataSourceServiceRole25BAE893","Arn"]},"type":"AWS_LAMBDA"}}}}},"RegisterTenantResolver":{"id":"RegisterTenantResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/RegisterTenantResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"RegisterTenantDataSource","fieldName":"registerTenant","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"UpdateTenantResolver":{"id":"UpdateTenantResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateTenantResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"UpdateTenantDataSource","fieldName":"updateTenant","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"SearchServicesResolver":{"id":"SearchServicesResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/SearchServicesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/SearchServicesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"searchServices","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"GetServiceResolver":{"id":"GetServiceResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetServiceResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetServiceResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"getService","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"ListProvidersResolver":{"id":"ListProvidersResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListProvidersResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListProvidersResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"listProviders","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"ListProvidersByServiceResolver":{"id":"ListProvidersByServiceResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListProvidersByServiceResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListProvidersByServiceResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"listProvidersByService","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"CreateServiceResolver":{"id":"CreateServiceResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateServiceResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateServiceResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"createService","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"UpdateServiceResolver":{"id":"UpdateServiceResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateServiceResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateServiceResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"updateService","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"DeleteServiceResolver":{"id":"DeleteServiceResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/DeleteServiceResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/DeleteServiceResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"deleteService","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ListCategoriesResolver":{"id":"ListCategoriesResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListCategoriesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListCategoriesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"listCategories","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"CreateCategoryResolver":{"id":"CreateCategoryResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateCategoryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateCategoryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"createCategory","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"UpdateCategoryResolver":{"id":"UpdateCategoryResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateCategoryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateCategoryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"updateCategory","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"DeleteCategoryResolver":{"id":"DeleteCategoryResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/DeleteCategoryResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/DeleteCategoryResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"deleteCategory","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"CreateProviderResolver":{"id":"CreateProviderResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateProviderResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateProviderResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"createProvider","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"UpdateProviderResolver":{"id":"UpdateProviderResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateProviderResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/UpdateProviderResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"updateProvider","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"DeleteProviderResolver":{"id":"DeleteProviderResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/DeleteProviderResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/DeleteProviderResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"CatalogDataSource","fieldName":"deleteProvider","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"GetAvailableSlotsResolver":{"id":"GetAvailableSlotsResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetAvailableSlotsResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetAvailableSlotsResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"AvailabilityDataSource","fieldName":"getAvailableSlots","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"SetProviderAvailabilityResolver":{"id":"SetProviderAvailabilityResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/SetProviderAvailabilityResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/SetProviderAvailabilityResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"AvailabilityDataSource","fieldName":"setProviderAvailability","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"GetProviderAvailabilityResolver":{"id":"GetProviderAvailabilityResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetProviderAvailabilityResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetProviderAvailabilityResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"AvailabilityDataSource","fieldName":"getProviderAvailability","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"GetBookingResolver":{"id":"GetBookingResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetBookingResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetBookingResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"BookingDataSource","fieldName":"getBooking","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"ListBookingsByProviderResolver":{"id":"ListBookingsByProviderResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListBookingsByProviderResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListBookingsByProviderResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"BookingDataSource","fieldName":"listBookingsByProvider","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"ListBookingsByClientResolver":{"id":"ListBookingsByClientResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListBookingsByClientResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ListBookingsByClientResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"BookingDataSource","fieldName":"listBookingsByClient","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"GetBookingByConversationResolver":{"id":"GetBookingByConversationResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetBookingByConversationResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetBookingByConversationResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"BookingDataSource","fieldName":"getBookingByConversation","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}},"CreateBookingResolver":{"id":"CreateBookingResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateBookingResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CreateBookingResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"BookingDataSource","fieldName":"createBooking","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ConfirmBookingResolver":{"id":"ConfirmBookingResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ConfirmBookingResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ConfirmBookingResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"BookingDataSource","fieldName":"confirmBooking","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"CancelBookingResolver":{"id":"CancelBookingResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CancelBookingResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/CancelBookingResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"BookingDataSource","fieldName":"cancelBooking","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"StartConversationResolver":{"id":"StartConversationResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/StartConversationResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/StartConversationResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"ChatAgentDataSource","fieldName":"startConversation","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"SendMessageResolver":{"id":"SendMessageResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/SendMessageResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/SendMessageResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"ChatAgentDataSource","fieldName":"sendMessage","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"ConfirmBookingFromConversationResolver":{"id":"ConfirmBookingFromConversationResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ConfirmBookingFromConversationResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/ConfirmBookingFromConversationResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"ChatAgentDataSource","fieldName":"confirmBookingFromConversation","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Mutation"}}}}},"GetConversationResolver":{"id":"GetConversationResolver","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetConversationResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.232.1"},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/ChatBookingApi/GetConversationResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["ChatBookingApi7E340B40","ApiId"]},"dataSourceName":"ChatAgentDataSource","fieldName":"getConversation","kind":"UNIT","requestMappingTemplate":"{\"version\": \"2017-02-28\", \"operation\": \"Invoke\", \"payload\": $util.toJson($ctx)}","responseMappingTemplate":"$util.toJson($ctx.result)","typeName":"Query"}}}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Code":{"id":"Code","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.232.1"},"children":{"Stage":{"id":"Stage","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.232.1"}},"AssetBucket":{"id":"AssetBucket","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.232.1","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.232.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.232.1","metadata":[]}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.232.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.232.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteRetentionPolicy","logs:PutRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"ChatBooking-dev-AppSyncApi/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"GraphQLApiUrl":{"id":"GraphQLApiUrl","path":"ChatBooking-dev-AppSyncApi/GraphQLApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"GraphQLApiId":{"id":"GraphQLApiId","path":"ChatBooking-dev-AppSyncApi/GraphQLApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"GraphQLApiKey":{"id":"GraphQLApiKey","path":"ChatBooking-dev-AppSyncApi/GraphQLApiKey","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"DeploymentSummary":{"id":"DeploymentSummary","path":"ChatBooking-dev-AppSyncApi/DeploymentSummary","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.232.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatBooking-dev-AppSyncApi/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ChatBooking-dev-AppSyncApi/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.232.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatBooking-dev-AppSyncApi/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.232.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatBooking-dev-AppSyncApi/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.232.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}